/*! For license information please see react-rxbuilder.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ReactRxBuilder=e():t.ReactRxBuilder=e()}(this,(function(){return(()=>{"use strict";var t={418:t=>{var e=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,i){for(var s,a,c=o(t),p=1;p<arguments.length;p++){for(var u in s=Object(arguments[p]))r.call(s,u)&&(c[u]=s[u]);if(e){a=e(s);for(var h=0;h<a.length;h++)n.call(s,a[h])&&(c[a[h]]=s[a[h]])}}return c}},408:(t,e,r)=>{var n=r(418);if("function"==typeof Symbol&&Symbol.for){var o=Symbol.for;o("react.element"),o("react.portal"),o("react.fragment"),o("react.strict_mode"),o("react.profiler"),o("react.provider"),o("react.context"),o("react.forward_ref"),o("react.suspense"),o("react.memo"),o("react.lazy")}"function"==typeof Symbol&&Symbol.iterator;function i(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a={};function c(t,e,r){this.props=t,this.context=e,this.refs=a,this.updater=r||s}function p(){}function u(t,e,r){this.props=t,this.context=e,this.refs=a,this.updater=r||s}c.prototype.isReactComponent={},c.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(i(85));this.updater.enqueueSetState(this,t,e,"setState")},c.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},p.prototype=c.prototype;var h=u.prototype=new p;h.constructor=u,n(h,c.prototype),h.isPureReactComponent=!0;Object.prototype.hasOwnProperty;e.Component=c},294:(t,e,r)=>{t.exports=r(408)}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{var t;r.r(n),r.d(n,{AsyncSnapshot:()=>e,ConnectionState:()=>t,PromiseBuilder:()=>s,RxBuilder:()=>i}),function(t){t[t.none=0]="none",t[t.waiting=1]="waiting",t[t.active=2]="active",t[t.done=3]="done"}(t||(t={}));class e{connectionState;data;error;constructor(t,e,r){this.connectionState=t,this.data=e,this.error=r}static nothing(){return new e(t.none,void 0,void 0)}static waiting(){return new e(t.waiting,void 0,void 0)}static withData(t,r){return new e(t,r,void 0)}static withError(t,r){return new e(t,void 0,r)}get hasData(){return void 0!==this.data}get hasError(){return void 0!==this.error}get requireData(){if(this.hasData)return this.data;if(this.hasError)throw this.error;throw"Snapshot has neither data nor error"}inState(t){return new e(t,this.data,this.error)}toString(){return`AsyncSnapshot: ${t[this.connectionState]}, ${this.data}, ${this.error}`}}var o=r(294);class i extends o.Component{_sub;state={snap:e.nothing()};afterConnected(e){return e.inState(t.waiting)}afterData(r,n){return e.withData(t.active,n)}afterError(r,n){return e.withError(t.active,n)}afterDone(e){return e.inState(t.done)}afterDisconnected(e){return e.inState(t.none)}_subscribe(){this.setState((t=>({snap:this.afterConnected(t.snap)}))),this._sub=this.props.stream.subscribe({next:t=>{this.setState((e=>({snap:this.afterData(e.snap,t)})))},error:t=>{this.setState((e=>({snap:this.afterError(e.snap,t)})))},complete:()=>{this.setState((t=>({snap:this.afterDone(t.snap)})))}})}_unsubscribe(){this._sub?.unsubscribe()}componentDidMount(){this._subscribe()}componentDidUpdate(t){t.stream!==this.props.stream&&(this._sub&&(this._unsubscribe(),this.state.snap=this.afterDisconnected(this.state.snap)),this._subscribe())}componentWillUnmount(){this._unsubscribe()}render(){return this.props.children(this.state.snap)}}class s extends o.Component{_activeCallbackIdentity=null;state={snap:e.nothing()};_subscribe(){this.setState((e=>({snap:e.snap.inState(t.waiting)})));const r={};this._activeCallbackIdentity=r,this.props.promise.then((n=>{this._activeCallbackIdentity==r&&this.setState({snap:e.withData(t.done,n)})})).catch((n=>{this._activeCallbackIdentity==r&&this.setState({snap:e.withError(t.done,n)})}))}_unsubscribe(){this._activeCallbackIdentity=null}componentDidMount(){this._subscribe()}componentDidUpdate(e){e.promise!==this.props.promise&&(null!==this._activeCallbackIdentity&&(this._unsubscribe(),this.state.snap=this.state.snap.inState(t.none)),this._subscribe())}componentWillUnmount(){this._unsubscribe()}render(){return this.props.children(this.state.snap)}}})(),n})()}));